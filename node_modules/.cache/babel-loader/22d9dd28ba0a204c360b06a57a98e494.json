{"ast":null,"code":"\"use strict\";\n\nvar clc = require(\"cli-color\");\n\nvar rtdb = require(\"../../rtdb\");\n\nvar utils = require(\"../../utils\");\n\nmodule.exports = function (context) {\n  if (!context.projectId || !context.database || !context.database.deploys || !context.database.ruleFiles) {\n    return Promise.resolve();\n  }\n\n  var deploys = context.database.deploys;\n  var ruleFiles = context.database.ruleFiles;\n  utils.logBullet(clc.bold.cyan(\"database: \") + \"releasing rules...\");\n  return Promise.all(deploys.map(function (deploy) {\n    return rtdb.updateRules(context.projectId, deploy.instance, ruleFiles[deploy.rules], {\n      dryRun: false\n    }).then(function () {\n      utils.logSuccess(clc.bold.green(\"database: \") + \"rules for database \" + clc.bold(deploy.instance) + \" released successfully\");\n    });\n  }));\n};","map":{"version":3,"sources":["/home/dev/Documentos/Projects/github-clone/node_modules/firebase-tools/lib/deploy/database/release.js"],"names":["clc","require","rtdb","utils","module","exports","context","projectId","database","deploys","ruleFiles","Promise","resolve","logBullet","bold","cyan","all","map","deploy","updateRules","instance","rules","dryRun","then","logSuccess","green"],"mappings":"AAAA;;AACA,IAAIA,GAAG,GAAGC,OAAO,CAAC,WAAD,CAAjB;;AACA,IAAIC,IAAI,GAAGD,OAAO,CAAC,YAAD,CAAlB;;AACA,IAAIE,KAAK,GAAGF,OAAO,CAAC,aAAD,CAAnB;;AACAG,MAAM,CAACC,OAAP,GAAiB,UAAUC,OAAV,EAAmB;AAChC,MAAI,CAACA,OAAO,CAACC,SAAT,IACA,CAACD,OAAO,CAACE,QADT,IAEA,CAACF,OAAO,CAACE,QAAR,CAAiBC,OAFlB,IAGA,CAACH,OAAO,CAACE,QAAR,CAAiBE,SAHtB,EAGiC;AAC7B,WAAOC,OAAO,CAACC,OAAR,EAAP;AACH;;AACD,MAAIH,OAAO,GAAGH,OAAO,CAACE,QAAR,CAAiBC,OAA/B;AACA,MAAIC,SAAS,GAAGJ,OAAO,CAACE,QAAR,CAAiBE,SAAjC;AACAP,EAAAA,KAAK,CAACU,SAAN,CAAgBb,GAAG,CAACc,IAAJ,CAASC,IAAT,CAAc,YAAd,IAA8B,oBAA9C;AACA,SAAOJ,OAAO,CAACK,GAAR,CAAYP,OAAO,CAACQ,GAAR,CAAY,UAAUC,MAAV,EAAkB;AAC7C,WAAOhB,IAAI,CACNiB,WADE,CACUb,OAAO,CAACC,SADlB,EAC6BW,MAAM,CAACE,QADpC,EAC8CV,SAAS,CAACQ,MAAM,CAACG,KAAR,CADvD,EACuE;AAC1EC,MAAAA,MAAM,EAAE;AADkE,KADvE,EAIFC,IAJE,CAIG,YAAY;AAClBpB,MAAAA,KAAK,CAACqB,UAAN,CAAiBxB,GAAG,CAACc,IAAJ,CAASW,KAAT,CAAe,YAAf,IACb,qBADa,GAEbzB,GAAG,CAACc,IAAJ,CAASI,MAAM,CAACE,QAAhB,CAFa,GAGb,wBAHJ;AAIH,KATM,CAAP;AAUH,GAXkB,CAAZ,CAAP;AAYH,CAtBD","sourcesContent":["\"use strict\";\nvar clc = require(\"cli-color\");\nvar rtdb = require(\"../../rtdb\");\nvar utils = require(\"../../utils\");\nmodule.exports = function (context) {\n    if (!context.projectId ||\n        !context.database ||\n        !context.database.deploys ||\n        !context.database.ruleFiles) {\n        return Promise.resolve();\n    }\n    var deploys = context.database.deploys;\n    var ruleFiles = context.database.ruleFiles;\n    utils.logBullet(clc.bold.cyan(\"database: \") + \"releasing rules...\");\n    return Promise.all(deploys.map(function (deploy) {\n        return rtdb\n            .updateRules(context.projectId, deploy.instance, ruleFiles[deploy.rules], {\n            dryRun: false,\n        })\n            .then(function () {\n            utils.logSuccess(clc.bold.green(\"database: \") +\n                \"rules for database \" +\n                clc.bold(deploy.instance) +\n                \" released successfully\");\n        });\n    }));\n};\n"]},"metadata":{},"sourceType":"script"}