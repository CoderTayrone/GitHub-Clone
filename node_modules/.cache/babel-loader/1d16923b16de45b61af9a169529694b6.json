{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Client = void 0;\n\nconst error_1 = require(\"../error\");\n\nconst api = require(\"../apiv2\");\n\nfunction isErrors(response) {\n  return Object.prototype.hasOwnProperty.call(response, \"errors\");\n}\n\nconst API_VERSION = \"v2\";\n\nclass Client {\n  constructor(origin) {\n    this.client = new api.Client({\n      apiVersion: API_VERSION,\n      auth: true,\n      urlPrefix: origin\n    });\n  }\n\n  async listTags(path) {\n    const response = await this.client.get(`${path}/tags/list`);\n\n    if (isErrors(response.body)) {\n      throw new error_1.FirebaseError(`Failed to list GCR tags at ${path}`, {\n        children: response.body.errors\n      });\n    }\n\n    return response.body;\n  }\n\n  async deleteTag(path, tag) {\n    var _a;\n\n    const response = await this.client.delete(`${path}/manifests/${tag}`);\n\n    if (((_a = response.body.errors) === null || _a === void 0 ? void 0 : _a.length) != 0) {\n      throw new error_1.FirebaseError(`Failed to delete tag ${tag} at path ${path}`, {\n        children: response.body.errors\n      });\n    }\n  }\n\n  async deleteImage(path, digest) {\n    var _a;\n\n    const response = await this.client.delete(`${path}/manifests/${digest}`);\n\n    if (((_a = response.body.errors) === null || _a === void 0 ? void 0 : _a.length) != 0) {\n      throw new error_1.FirebaseError(`Failed to delete image ${digest} at path ${path}`, {\n        children: response.body.errors\n      });\n    }\n  }\n\n}\n\nexports.Client = Client;","map":{"version":3,"sources":["/home/dev/Documentos/Projects/github-clone/node_modules/firebase-tools/lib/gcp/docker.js"],"names":["Object","defineProperty","exports","value","Client","error_1","require","api","isErrors","response","prototype","hasOwnProperty","call","API_VERSION","constructor","origin","client","apiVersion","auth","urlPrefix","listTags","path","get","body","FirebaseError","children","errors","deleteTag","tag","_a","delete","length","deleteImage","digest"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,MAAR,GAAiB,KAAK,CAAtB;;AACA,MAAMC,OAAO,GAAGC,OAAO,CAAC,UAAD,CAAvB;;AACA,MAAMC,GAAG,GAAGD,OAAO,CAAC,UAAD,CAAnB;;AACA,SAASE,QAAT,CAAkBC,QAAlB,EAA4B;AACxB,SAAOT,MAAM,CAACU,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCH,QAArC,EAA+C,QAA/C,CAAP;AACH;;AACD,MAAMI,WAAW,GAAG,IAApB;;AACA,MAAMT,MAAN,CAAa;AACTU,EAAAA,WAAW,CAACC,MAAD,EAAS;AAChB,SAAKC,MAAL,GAAc,IAAIT,GAAG,CAACH,MAAR,CAAe;AACzBa,MAAAA,UAAU,EAAEJ,WADa;AAEzBK,MAAAA,IAAI,EAAE,IAFmB;AAGzBC,MAAAA,SAAS,EAAEJ;AAHc,KAAf,CAAd;AAKH;;AACa,QAARK,QAAQ,CAACC,IAAD,EAAO;AACjB,UAAMZ,QAAQ,GAAG,MAAM,KAAKO,MAAL,CAAYM,GAAZ,CAAiB,GAAED,IAAK,YAAxB,CAAvB;;AACA,QAAIb,QAAQ,CAACC,QAAQ,CAACc,IAAV,CAAZ,EAA6B;AACzB,YAAM,IAAIlB,OAAO,CAACmB,aAAZ,CAA2B,8BAA6BH,IAAK,EAA7D,EAAgE;AAClEI,QAAAA,QAAQ,EAAEhB,QAAQ,CAACc,IAAT,CAAcG;AAD0C,OAAhE,CAAN;AAGH;;AACD,WAAOjB,QAAQ,CAACc,IAAhB;AACH;;AACc,QAATI,SAAS,CAACN,IAAD,EAAOO,GAAP,EAAY;AACvB,QAAIC,EAAJ;;AACA,UAAMpB,QAAQ,GAAG,MAAM,KAAKO,MAAL,CAAYc,MAAZ,CAAoB,GAAET,IAAK,cAAaO,GAAI,EAA5C,CAAvB;;AACA,QAAI,CAAC,CAACC,EAAE,GAAGpB,QAAQ,CAACc,IAAT,CAAcG,MAApB,MAAgC,IAAhC,IAAwCG,EAAE,KAAK,KAAK,CAApD,GAAwD,KAAK,CAA7D,GAAiEA,EAAE,CAACE,MAArE,KAAgF,CAApF,EAAuF;AACnF,YAAM,IAAI1B,OAAO,CAACmB,aAAZ,CAA2B,wBAAuBI,GAAI,YAAWP,IAAK,EAAtE,EAAyE;AAC3EI,QAAAA,QAAQ,EAAEhB,QAAQ,CAACc,IAAT,CAAcG;AADmD,OAAzE,CAAN;AAGH;AACJ;;AACgB,QAAXM,WAAW,CAACX,IAAD,EAAOY,MAAP,EAAe;AAC5B,QAAIJ,EAAJ;;AACA,UAAMpB,QAAQ,GAAG,MAAM,KAAKO,MAAL,CAAYc,MAAZ,CAAoB,GAAET,IAAK,cAAaY,MAAO,EAA/C,CAAvB;;AACA,QAAI,CAAC,CAACJ,EAAE,GAAGpB,QAAQ,CAACc,IAAT,CAAcG,MAApB,MAAgC,IAAhC,IAAwCG,EAAE,KAAK,KAAK,CAApD,GAAwD,KAAK,CAA7D,GAAiEA,EAAE,CAACE,MAArE,KAAgF,CAApF,EAAuF;AACnF,YAAM,IAAI1B,OAAO,CAACmB,aAAZ,CAA2B,0BAAyBS,MAAO,YAAWZ,IAAK,EAA3E,EAA8E;AAChFI,QAAAA,QAAQ,EAAEhB,QAAQ,CAACc,IAAT,CAAcG;AADwD,OAA9E,CAAN;AAGH;AACJ;;AAlCQ;;AAoCbxB,OAAO,CAACE,MAAR,GAAiBA,MAAjB","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Client = void 0;\nconst error_1 = require(\"../error\");\nconst api = require(\"../apiv2\");\nfunction isErrors(response) {\n    return Object.prototype.hasOwnProperty.call(response, \"errors\");\n}\nconst API_VERSION = \"v2\";\nclass Client {\n    constructor(origin) {\n        this.client = new api.Client({\n            apiVersion: API_VERSION,\n            auth: true,\n            urlPrefix: origin,\n        });\n    }\n    async listTags(path) {\n        const response = await this.client.get(`${path}/tags/list`);\n        if (isErrors(response.body)) {\n            throw new error_1.FirebaseError(`Failed to list GCR tags at ${path}`, {\n                children: response.body.errors,\n            });\n        }\n        return response.body;\n    }\n    async deleteTag(path, tag) {\n        var _a;\n        const response = await this.client.delete(`${path}/manifests/${tag}`);\n        if (((_a = response.body.errors) === null || _a === void 0 ? void 0 : _a.length) != 0) {\n            throw new error_1.FirebaseError(`Failed to delete tag ${tag} at path ${path}`, {\n                children: response.body.errors,\n            });\n        }\n    }\n    async deleteImage(path, digest) {\n        var _a;\n        const response = await this.client.delete(`${path}/manifests/${digest}`);\n        if (((_a = response.body.errors) === null || _a === void 0 ? void 0 : _a.length) != 0) {\n            throw new error_1.FirebaseError(`Failed to delete image ${digest} at path ${path}`, {\n                children: response.body.errors,\n            });\n        }\n    }\n}\nexports.Client = Client;\n"]},"metadata":{},"sourceType":"script"}