{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.displayNode10CreateBillingNotice = exports.displayNode10UpdateBillingNotice = void 0;\n\nconst marked = require(\"marked\");\n\nconst TerminalRenderer = require(\"marked-terminal\");\n\nconst error_1 = require(\"../error\");\n\nconst extensionsHelper_1 = require(\"./extensionsHelper\");\n\nconst prompt_1 = require(\"../prompt\");\n\nconst utils = require(\"../utils\");\n\nmarked.setOptions({\n  renderer: new TerminalRenderer()\n});\nconst urlPricingExamples = \"https://cloud.google.com/functions/pricing#pricing_examples\";\nconst urlFAQ = \"https://firebase.google.com/support/faq/#extensions-pricing\";\nconst billingMsgUpdate = \"This update includes an upgrade to Node.js 10 from Node.js 8, which is no\" + \" longer maintained. Starting with this update, you will be charged a\" + \" small amount (typically around $0.01/month) for the Firebase resources\" + \" required by this extension (even if it is not used), in addition to any\" + \" charges associated with its usage.\\n\\n\" + `See pricing examples: **[${urlPricingExamples}](${urlPricingExamples})**\\n` + `See the FAQ: **[${urlFAQ}](${urlFAQ})**\\n`;\nconst billingMsgCreate = \"You will be charged around $0.01/month for the Firebase resources\" + \" required by this extension (even if it is not used). Additionally,\" + \" using this extension will contribute to your project's overall usage\" + \" level of Firebase services. However, you'll only be charged for usage\" + \" that exceeds Firebase's free tier for those services.\\n\\n\" + `See pricing examples: **[${urlPricingExamples}](${urlPricingExamples})**\\n` + `See the FAQ: **[${urlFAQ}](${urlFAQ})**\\n`;\nconst defaultSpecVersion = \"v1beta\";\nconst defaultRuntimes = {\n  v1beta: \"nodejs8\"\n};\n\nfunction hasRuntime(spec, runtime) {\n  const specVersion = spec.specVersion || defaultSpecVersion;\n  const defaultRuntime = defaultRuntimes[specVersion];\n  const resources = spec.resources || [];\n  return resources.some(r => {\n    var _a;\n\n    return runtime === (((_a = r.properties) === null || _a === void 0 ? void 0 : _a.runtime) || defaultRuntime);\n  });\n}\n\nasync function displayNode10UpdateBillingNotice(curSpec, newSpec, prompt) {\n  if (hasRuntime(curSpec, \"nodejs8\") && hasRuntime(newSpec, \"nodejs10\")) {\n    utils.logLabeledWarning(extensionsHelper_1.logPrefix, marked(billingMsgUpdate));\n\n    if (prompt) {\n      const continueUpdate = await prompt_1.promptOnce({\n        type: \"confirm\",\n        message: \"Do you wish to continue?\",\n        default: true\n      });\n\n      if (!continueUpdate) {\n        throw new error_1.FirebaseError(`Cancelled.`, {\n          exit: 2\n        });\n      }\n    }\n  }\n}\n\nexports.displayNode10UpdateBillingNotice = displayNode10UpdateBillingNotice;\n\nasync function displayNode10CreateBillingNotice(spec, prompt) {\n  if (hasRuntime(spec, \"nodejs10\")) {\n    utils.logLabeledWarning(extensionsHelper_1.logPrefix, marked(billingMsgCreate));\n\n    if (prompt) {\n      const continueUpdate = await prompt_1.promptOnce({\n        type: \"confirm\",\n        message: \"Do you wish to continue?\",\n        default: true\n      });\n\n      if (!continueUpdate) {\n        throw new error_1.FirebaseError(`Cancelled.`, {\n          exit: 2\n        });\n      }\n    }\n  }\n}\n\nexports.displayNode10CreateBillingNotice = displayNode10CreateBillingNotice;","map":{"version":3,"sources":["/home/dev/Documentos/Projects/github-clone/node_modules/firebase-tools/lib/extensions/billingMigrationHelper.js"],"names":["Object","defineProperty","exports","value","displayNode10CreateBillingNotice","displayNode10UpdateBillingNotice","marked","require","TerminalRenderer","error_1","extensionsHelper_1","prompt_1","utils","setOptions","renderer","urlPricingExamples","urlFAQ","billingMsgUpdate","billingMsgCreate","defaultSpecVersion","defaultRuntimes","v1beta","hasRuntime","spec","runtime","specVersion","defaultRuntime","resources","some","r","_a","properties","curSpec","newSpec","prompt","logLabeledWarning","logPrefix","continueUpdate","promptOnce","type","message","default","FirebaseError","exit"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.displayNode10CreateBillingNotice = exports.displayNode10UpdateBillingNotice = void 0;\nconst marked = require(\"marked\");\nconst TerminalRenderer = require(\"marked-terminal\");\nconst error_1 = require(\"../error\");\nconst extensionsHelper_1 = require(\"./extensionsHelper\");\nconst prompt_1 = require(\"../prompt\");\nconst utils = require(\"../utils\");\nmarked.setOptions({\n    renderer: new TerminalRenderer(),\n});\nconst urlPricingExamples = \"https://cloud.google.com/functions/pricing#pricing_examples\";\nconst urlFAQ = \"https://firebase.google.com/support/faq/#extensions-pricing\";\nconst billingMsgUpdate = \"This update includes an upgrade to Node.js 10 from Node.js 8, which is no\" +\n    \" longer maintained. Starting with this update, you will be charged a\" +\n    \" small amount (typically around $0.01/month) for the Firebase resources\" +\n    \" required by this extension (even if it is not used), in addition to any\" +\n    \" charges associated with its usage.\\n\\n\" +\n    `See pricing examples: **[${urlPricingExamples}](${urlPricingExamples})**\\n` +\n    `See the FAQ: **[${urlFAQ}](${urlFAQ})**\\n`;\nconst billingMsgCreate = \"You will be charged around $0.01/month for the Firebase resources\" +\n    \" required by this extension (even if it is not used). Additionally,\" +\n    \" using this extension will contribute to your project's overall usage\" +\n    \" level of Firebase services. However, you'll only be charged for usage\" +\n    \" that exceeds Firebase's free tier for those services.\\n\\n\" +\n    `See pricing examples: **[${urlPricingExamples}](${urlPricingExamples})**\\n` +\n    `See the FAQ: **[${urlFAQ}](${urlFAQ})**\\n`;\nconst defaultSpecVersion = \"v1beta\";\nconst defaultRuntimes = {\n    v1beta: \"nodejs8\",\n};\nfunction hasRuntime(spec, runtime) {\n    const specVersion = spec.specVersion || defaultSpecVersion;\n    const defaultRuntime = defaultRuntimes[specVersion];\n    const resources = spec.resources || [];\n    return resources.some((r) => { var _a; return runtime === (((_a = r.properties) === null || _a === void 0 ? void 0 : _a.runtime) || defaultRuntime); });\n}\nasync function displayNode10UpdateBillingNotice(curSpec, newSpec, prompt) {\n    if (hasRuntime(curSpec, \"nodejs8\") && hasRuntime(newSpec, \"nodejs10\")) {\n        utils.logLabeledWarning(extensionsHelper_1.logPrefix, marked(billingMsgUpdate));\n        if (prompt) {\n            const continueUpdate = await prompt_1.promptOnce({\n                type: \"confirm\",\n                message: \"Do you wish to continue?\",\n                default: true,\n            });\n            if (!continueUpdate) {\n                throw new error_1.FirebaseError(`Cancelled.`, { exit: 2 });\n            }\n        }\n    }\n}\nexports.displayNode10UpdateBillingNotice = displayNode10UpdateBillingNotice;\nasync function displayNode10CreateBillingNotice(spec, prompt) {\n    if (hasRuntime(spec, \"nodejs10\")) {\n        utils.logLabeledWarning(extensionsHelper_1.logPrefix, marked(billingMsgCreate));\n        if (prompt) {\n            const continueUpdate = await prompt_1.promptOnce({\n                type: \"confirm\",\n                message: \"Do you wish to continue?\",\n                default: true,\n            });\n            if (!continueUpdate) {\n                throw new error_1.FirebaseError(`Cancelled.`, { exit: 2 });\n            }\n        }\n    }\n}\nexports.displayNode10CreateBillingNotice = displayNode10CreateBillingNotice;\n"]},"metadata":{},"sourceType":"script"}