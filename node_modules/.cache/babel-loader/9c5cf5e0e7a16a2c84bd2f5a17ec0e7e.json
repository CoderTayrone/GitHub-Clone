{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getRuntimeDelegate = exports.getHumanFriendlyRuntimeName = exports.isValidRuntime = exports.isDeprecatedRuntime = void 0;\n\nconst golang = require(\"./golang\");\n\nconst node = require(\"./node\");\n\nconst validate = require(\"../validate\");\n\nconst error_1 = require(\"../../../error\");\n\nconst RUNTIMES = [\"nodejs10\", \"nodejs12\", \"nodejs14\", \"nodejs16\"];\nconst EXPERIMENTAL_RUNTIMES = [\"go113\"];\nconst DEPRECATED_RUNTIMES = [\"nodejs6\", \"nodejs8\"];\n\nfunction isDeprecatedRuntime(runtime) {\n  return DEPRECATED_RUNTIMES.includes(runtime);\n}\n\nexports.isDeprecatedRuntime = isDeprecatedRuntime;\n\nfunction isValidRuntime(runtime) {\n  return RUNTIMES.includes(runtime) || EXPERIMENTAL_RUNTIMES.includes(runtime);\n}\n\nexports.isValidRuntime = isValidRuntime;\nconst MESSAGE_FRIENDLY_RUNTIMES = {\n  nodejs6: \"Node.js 6 (Deprecated)\",\n  nodejs8: \"Node.js 8 (Deprecated)\",\n  nodejs10: \"Node.js 10\",\n  nodejs12: \"Node.js 12\",\n  nodejs14: \"Node.js 14\",\n  nodejs16: \"Node.js 16\",\n  go113: \"Go 1.13\"\n};\n\nfunction getHumanFriendlyRuntimeName(runtime) {\n  return MESSAGE_FRIENDLY_RUNTIMES[runtime] || runtime;\n}\n\nexports.getHumanFriendlyRuntimeName = getHumanFriendlyRuntimeName;\nconst factories = [node.tryCreateDelegate, golang.tryCreateDelegate];\n\nasync function getRuntimeDelegate(context, options) {\n  const sourceDirName = options.config.get(\"functions.source\");\n\n  if (!sourceDirName) {\n    throw new error_1.FirebaseError(`No functions code detected at default location (./functions), and no functions.source defined in firebase.json`);\n  }\n\n  validate.functionsDirectoryExists(options, sourceDirName);\n  const runtime = options.config.get(\"functions.runtime\");\n\n  if (runtime && !isValidRuntime(runtime)) {\n    throw new error_1.FirebaseError(\"Cannot deploy function with runtime \" + runtime);\n  }\n\n  for (const factory of factories) {\n    const delegate = await factory(context, options);\n\n    if (delegate) {\n      return delegate;\n    }\n  }\n\n  throw new error_1.FirebaseError(`Could not detect language for functions at ${options.config.get(\"functions.source\")}`);\n}\n\nexports.getRuntimeDelegate = getRuntimeDelegate;","map":{"version":3,"sources":["/home/dev/Documentos/Projects/github-clone/node_modules/firebase-tools/lib/deploy/functions/runtimes/index.js"],"names":["Object","defineProperty","exports","value","getRuntimeDelegate","getHumanFriendlyRuntimeName","isValidRuntime","isDeprecatedRuntime","golang","require","node","validate","error_1","RUNTIMES","EXPERIMENTAL_RUNTIMES","DEPRECATED_RUNTIMES","runtime","includes","MESSAGE_FRIENDLY_RUNTIMES","nodejs6","nodejs8","nodejs10","nodejs12","nodejs14","nodejs16","go113","factories","tryCreateDelegate","context","options","sourceDirName","config","get","FirebaseError","functionsDirectoryExists","factory","delegate"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getRuntimeDelegate = exports.getHumanFriendlyRuntimeName = exports.isValidRuntime = exports.isDeprecatedRuntime = void 0;\nconst golang = require(\"./golang\");\nconst node = require(\"./node\");\nconst validate = require(\"../validate\");\nconst error_1 = require(\"../../../error\");\nconst RUNTIMES = [\"nodejs10\", \"nodejs12\", \"nodejs14\", \"nodejs16\"];\nconst EXPERIMENTAL_RUNTIMES = [\"go113\"];\nconst DEPRECATED_RUNTIMES = [\"nodejs6\", \"nodejs8\"];\nfunction isDeprecatedRuntime(runtime) {\n    return DEPRECATED_RUNTIMES.includes(runtime);\n}\nexports.isDeprecatedRuntime = isDeprecatedRuntime;\nfunction isValidRuntime(runtime) {\n    return RUNTIMES.includes(runtime) || EXPERIMENTAL_RUNTIMES.includes(runtime);\n}\nexports.isValidRuntime = isValidRuntime;\nconst MESSAGE_FRIENDLY_RUNTIMES = {\n    nodejs6: \"Node.js 6 (Deprecated)\",\n    nodejs8: \"Node.js 8 (Deprecated)\",\n    nodejs10: \"Node.js 10\",\n    nodejs12: \"Node.js 12\",\n    nodejs14: \"Node.js 14\",\n    nodejs16: \"Node.js 16\",\n    go113: \"Go 1.13\",\n};\nfunction getHumanFriendlyRuntimeName(runtime) {\n    return MESSAGE_FRIENDLY_RUNTIMES[runtime] || runtime;\n}\nexports.getHumanFriendlyRuntimeName = getHumanFriendlyRuntimeName;\nconst factories = [node.tryCreateDelegate, golang.tryCreateDelegate];\nasync function getRuntimeDelegate(context, options) {\n    const sourceDirName = options.config.get(\"functions.source\");\n    if (!sourceDirName) {\n        throw new error_1.FirebaseError(`No functions code detected at default location (./functions), and no functions.source defined in firebase.json`);\n    }\n    validate.functionsDirectoryExists(options, sourceDirName);\n    const runtime = options.config.get(\"functions.runtime\");\n    if (runtime && !isValidRuntime(runtime)) {\n        throw new error_1.FirebaseError(\"Cannot deploy function with runtime \" + runtime);\n    }\n    for (const factory of factories) {\n        const delegate = await factory(context, options);\n        if (delegate) {\n            return delegate;\n        }\n    }\n    throw new error_1.FirebaseError(`Could not detect language for functions at ${options.config.get(\"functions.source\")}`);\n}\nexports.getRuntimeDelegate = getRuntimeDelegate;\n"]},"metadata":{},"sourceType":"script"}