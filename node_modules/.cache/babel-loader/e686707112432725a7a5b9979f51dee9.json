{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.serve = void 0;\n\nconst _ = require(\"lodash\");\n\nconst logger_1 = require(\"../logger\");\n\nconst {\n  FunctionsServer\n} = require(\"./functions\");\n\nconst TARGETS = {\n  hosting: require(\"./hosting\"),\n  functions: new FunctionsServer()\n};\n\nasync function serve(options) {\n  const targetNames = options.targets;\n  options.port = parseInt(options.port, 10);\n  await Promise.all(_.map(targetNames, targetName => {\n    return TARGETS[targetName].start(options);\n  }));\n  await Promise.all(_.map(targetNames, targetName => {\n    return TARGETS[targetName].connect();\n  }));\n  await new Promise(resolve => {\n    process.on(\"SIGINT\", () => {\n      logger_1.logger.info(\"Shutting down...\");\n      return Promise.all(_.map(targetNames, targetName => {\n        return TARGETS[targetName].stop(options);\n      })).then(resolve).catch(resolve);\n    });\n  });\n}\n\nexports.serve = serve;","map":{"version":3,"sources":["/home/dev/Documentos/Projects/github-clone/node_modules/firebase-tools/lib/serve/index.js"],"names":["Object","defineProperty","exports","value","serve","_","require","logger_1","FunctionsServer","TARGETS","hosting","functions","options","targetNames","targets","port","parseInt","Promise","all","map","targetName","start","connect","resolve","process","on","logger","info","stop","then","catch"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,KAAR,GAAgB,KAAK,CAArB;;AACA,MAAMC,CAAC,GAAGC,OAAO,CAAC,QAAD,CAAjB;;AACA,MAAMC,QAAQ,GAAGD,OAAO,CAAC,WAAD,CAAxB;;AACA,MAAM;AAAEE,EAAAA;AAAF,IAAsBF,OAAO,CAAC,aAAD,CAAnC;;AACA,MAAMG,OAAO,GAAG;AACZC,EAAAA,OAAO,EAAEJ,OAAO,CAAC,WAAD,CADJ;AAEZK,EAAAA,SAAS,EAAE,IAAIH,eAAJ;AAFC,CAAhB;;AAIA,eAAeJ,KAAf,CAAqBQ,OAArB,EAA8B;AAC1B,QAAMC,WAAW,GAAGD,OAAO,CAACE,OAA5B;AACAF,EAAAA,OAAO,CAACG,IAAR,GAAeC,QAAQ,CAACJ,OAAO,CAACG,IAAT,EAAe,EAAf,CAAvB;AACA,QAAME,OAAO,CAACC,GAAR,CAAYb,CAAC,CAACc,GAAF,CAAMN,WAAN,EAAoBO,UAAD,IAAgB;AACjD,WAAOX,OAAO,CAACW,UAAD,CAAP,CAAoBC,KAApB,CAA0BT,OAA1B,CAAP;AACH,GAFiB,CAAZ,CAAN;AAGA,QAAMK,OAAO,CAACC,GAAR,CAAYb,CAAC,CAACc,GAAF,CAAMN,WAAN,EAAoBO,UAAD,IAAgB;AACjD,WAAOX,OAAO,CAACW,UAAD,CAAP,CAAoBE,OAApB,EAAP;AACH,GAFiB,CAAZ,CAAN;AAGA,QAAM,IAAIL,OAAJ,CAAaM,OAAD,IAAa;AAC3BC,IAAAA,OAAO,CAACC,EAAR,CAAW,QAAX,EAAqB,MAAM;AACvBlB,MAAAA,QAAQ,CAACmB,MAAT,CAAgBC,IAAhB,CAAqB,kBAArB;AACA,aAAOV,OAAO,CAACC,GAAR,CAAYb,CAAC,CAACc,GAAF,CAAMN,WAAN,EAAoBO,UAAD,IAAgB;AAClD,eAAOX,OAAO,CAACW,UAAD,CAAP,CAAoBQ,IAApB,CAAyBhB,OAAzB,CAAP;AACH,OAFkB,CAAZ,EAGFiB,IAHE,CAGGN,OAHH,EAIFO,KAJE,CAIIP,OAJJ,CAAP;AAKH,KAPD;AAQH,GATK,CAAN;AAUH;;AACDrB,OAAO,CAACE,KAAR,GAAgBA,KAAhB","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.serve = void 0;\nconst _ = require(\"lodash\");\nconst logger_1 = require(\"../logger\");\nconst { FunctionsServer } = require(\"./functions\");\nconst TARGETS = {\n    hosting: require(\"./hosting\"),\n    functions: new FunctionsServer(),\n};\nasync function serve(options) {\n    const targetNames = options.targets;\n    options.port = parseInt(options.port, 10);\n    await Promise.all(_.map(targetNames, (targetName) => {\n        return TARGETS[targetName].start(options);\n    }));\n    await Promise.all(_.map(targetNames, (targetName) => {\n        return TARGETS[targetName].connect();\n    }));\n    await new Promise((resolve) => {\n        process.on(\"SIGINT\", () => {\n            logger_1.logger.info(\"Shutting down...\");\n            return Promise.all(_.map(targetNames, (targetName) => {\n                return TARGETS[targetName].stop(options);\n            }))\n                .then(resolve)\n                .catch(resolve);\n        });\n    });\n}\nexports.serve = serve;\n"]},"metadata":{},"sourceType":"script"}