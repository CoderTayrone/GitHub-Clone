{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.invokeController = void 0;\n\nconst promise_breaker_1 = __importDefault(require(\"promise-breaker\"));\n\nconst typeUtils_1 = require(\"../utils/typeUtils\");\n\nfunction invokeController(controllerModule, controller, context) {\n  return promise_breaker_1.default.apply(controller, controllerModule, [context]).then(result => {\n    if (!context.res.ended) {\n      if (result === undefined || result === null) {\n        context.res.end();\n      } else if (typeof result === 'string' || result instanceof Buffer || typeUtils_1.isReadable(result)) {\n        context.res.setBody(result);\n      } else if (context.options.treatReturnedJsonAsPure) {\n        context.res.pureJson(result);\n      } else {\n        context.res.json(result);\n      }\n    }\n\n    return result;\n  });\n}\n\nexports.invokeController = invokeController;","map":{"version":3,"sources":["../../src/controllers/invoke.ts"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,MAAA,iBAAA,GAAA,eAAA,CAAA,OAAA,CAAA,iBAAA,CAAA,CAAA;;AAEA,MAAA,WAAA,GAAA,OAAA,CAAA,oBAAA,CAAA;;AAEA,SAAgB,gBAAhB,CACI,gBADJ,EAEI,UAFJ,EAGI,OAHJ,EAG4B;AAExB,SAAO,iBAAA,CAAA,OAAA,CAAG,KAAH,CAAS,UAAT,EAAqB,gBAArB,EAAuC,CAAC,OAAD,CAAvC,EAAkD,IAAlD,CAAwD,MAAD,IAAW;AACrE,QAAI,CAAC,OAAO,CAAC,GAAR,CAAY,KAAjB,EAAwB;AACpB,UAAI,MAAM,KAAK,SAAX,IAAwB,MAAM,KAAK,IAAvC,EAA6C;AACzC,QAAA,OAAO,CAAC,GAAR,CAAY,GAAZ;AACH,OAFD,MAEO,IACH,OAAO,MAAP,KAAkB,QAAlB,IACA,MAAM,YAAY,MADlB,IAEA,WAAA,CAAA,UAAA,CAAW,MAAX,CAHG,EAIL;AACE,QAAA,OAAO,CAAC,GAAR,CAAY,OAAZ,CAAoB,MAApB;AACH,OANM,MAMA,IAAI,OAAO,CAAC,OAAR,CAAgB,uBAApB,EAA6C;AAChD,QAAA,OAAO,CAAC,GAAR,CAAY,QAAZ,CAAqB,MAArB;AACH,OAFM,MAEA;AACH,QAAA,OAAO,CAAC,GAAR,CAAY,IAAZ,CAAiB,MAAjB;AACH;AACJ;;AAED,WAAO,MAAP;AACH,GAlBM,CAAP;AAmBH;;AAxBD,OAAA,CAAA,gBAAA,GAAA,gBAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.invokeController = void 0;\nconst promise_breaker_1 = __importDefault(require(\"promise-breaker\"));\nconst typeUtils_1 = require(\"../utils/typeUtils\");\nfunction invokeController(controllerModule, controller, context) {\n    return promise_breaker_1.default.apply(controller, controllerModule, [context]).then((result) => {\n        if (!context.res.ended) {\n            if (result === undefined || result === null) {\n                context.res.end();\n            }\n            else if (typeof result === 'string' ||\n                result instanceof Buffer ||\n                typeUtils_1.isReadable(result)) {\n                context.res.setBody(result);\n            }\n            else if (context.options.treatReturnedJsonAsPure) {\n                context.res.pureJson(result);\n            }\n            else {\n                context.res.json(result);\n            }\n        }\n        return result;\n    });\n}\nexports.invokeController = invokeController;\n//# sourceMappingURL=invoke.js.map"]},"metadata":{},"sourceType":"script"}