{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.resolveRef = void 0;\n\nconst jsonPtr = __importStar(require(\"json-ptr\"));\n\nfunction resolveRefPriv(document, ref) {\n  if (!ref.startsWith('#/') && !ref.startsWith('/') && ref !== '') {\n    throw new Error(`Cannot resolve non-local ref ${ref}`);\n  }\n\n  const path = jsonPtr.JsonPointer.decode(ref).slice();\n  let currentDoc = document;\n\n  while (path.length > 0) {\n    const pathname = path.shift();\n    currentDoc = currentDoc && currentDoc[pathname];\n\n    while (currentDoc && currentDoc.$ref) {\n      currentDoc = resolveRefPriv(document, currentDoc.$ref);\n    }\n  }\n\n  return currentDoc;\n}\n\nfunction resolveRef(document, ref) {\n  if (ref instanceof String) {\n    return resolveRef(document, ref.toString());\n  } else if (typeof ref === 'string') {\n    return resolveRefPriv(document, ref);\n  } else if (ref.$ref) {\n    return resolveRefPriv(document, ref.$ref);\n  } else {\n    return ref;\n  }\n}\n\nexports.resolveRef = resolveRef;","map":{"version":3,"sources":["../../src/utils/json-schema-resolve-ref.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAA,OAAA,GAAA,YAAA,CAAA,OAAA,CAAA,UAAA,CAAA,CAAA;;AAEA,SAAS,cAAT,CAAwB,QAAxB,EAAuC,GAAvC,EAAkD;AAC9C,MAAI,CAAC,GAAG,CAAC,UAAJ,CAAe,IAAf,CAAD,IAAyB,CAAC,GAAG,CAAC,UAAJ,CAAe,GAAf,CAA1B,IAAiD,GAAG,KAAK,EAA7D,EAAiE;AAC7D,UAAM,IAAI,KAAJ,CAAU,gCAAgC,GAAG,EAA7C,CAAN;AACH;;AAED,QAAM,IAAI,GAAG,OAAO,CAAC,WAAR,CAAoB,MAApB,CAA2B,GAA3B,EAAgC,KAAhC,EAAb;AACA,MAAI,UAAU,GAAG,QAAjB;;AACA,SAAO,IAAI,CAAC,MAAL,GAAc,CAArB,EAAwB;AACpB,UAAM,QAAQ,GAAG,IAAI,CAAC,KAAL,EAAjB;AACA,IAAA,UAAU,GAAG,UAAU,IAAI,UAAU,CAAC,QAAD,CAArC;;AACA,WAAO,UAAU,IAAI,UAAU,CAAC,IAAhC,EAAsC;AAClC,MAAA,UAAU,GAAG,cAAc,CAAC,QAAD,EAAW,UAAU,CAAC,IAAtB,CAA3B;AACH;AACJ;;AAED,SAAO,UAAP;AACH;;AAED,SAAgB,UAAhB,CAA2B,QAA3B,EAA0C,GAA1C,EAA2D;AACvD,MAAI,GAAG,YAAY,MAAnB,EAA2B;AACvB,WAAO,UAAU,CAAC,QAAD,EAAW,GAAG,CAAC,QAAJ,EAAX,CAAjB;AACH,GAFD,MAEO,IAAI,OAAO,GAAP,KAAe,QAAnB,EAA6B;AAChC,WAAO,cAAc,CAAC,QAAD,EAAW,GAAX,CAArB;AACH,GAFM,MAEA,IAAI,GAAG,CAAC,IAAR,EAAc;AACjB,WAAO,cAAc,CAAC,QAAD,EAAW,GAAG,CAAC,IAAf,CAArB;AACH,GAFM,MAEA;AACH,WAAO,GAAP;AACH;AACJ;;AAVD,OAAA,CAAA,UAAA,GAAA,UAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolveRef = void 0;\nconst jsonPtr = __importStar(require(\"json-ptr\"));\nfunction resolveRefPriv(document, ref) {\n    if (!ref.startsWith('#/') && !ref.startsWith('/') && ref !== '') {\n        throw new Error(`Cannot resolve non-local ref ${ref}`);\n    }\n    const path = jsonPtr.JsonPointer.decode(ref).slice();\n    let currentDoc = document;\n    while (path.length > 0) {\n        const pathname = path.shift();\n        currentDoc = currentDoc && currentDoc[pathname];\n        while (currentDoc && currentDoc.$ref) {\n            currentDoc = resolveRefPriv(document, currentDoc.$ref);\n        }\n    }\n    return currentDoc;\n}\nfunction resolveRef(document, ref) {\n    if (ref instanceof String) {\n        return resolveRef(document, ref.toString());\n    }\n    else if (typeof ref === 'string') {\n        return resolveRefPriv(document, ref);\n    }\n    else if (ref.$ref) {\n        return resolveRefPriv(document, ref.$ref);\n    }\n    else {\n        return ref;\n    }\n}\nexports.resolveRef = resolveRef;\n//# sourceMappingURL=json-schema-resolve-ref.js.map"]},"metadata":{},"sourceType":"script"}