{"ast":null,"code":"/**\n * node-crc32-stream\n *\n * Copyright (c) 2014 Chris Talkington, contributors.\n * Licensed under the MIT license.\n * https://github.com/archiverjs/node-crc32-stream/blob/master/LICENSE-MIT\n */\n'use strict';\n\nconst {\n  DeflateRaw\n} = require('zlib');\n\nconst crc32 = require('crc-32');\n\nclass DeflateCRC32Stream extends DeflateRaw {\n  constructor(options) {\n    super(options);\n    this.checksum = Buffer.allocUnsafe(4);\n    this.checksum.writeInt32BE(0, 0);\n    this.rawSize = 0;\n    this.compressedSize = 0;\n  }\n\n  push(chunk, encoding) {\n    if (chunk) {\n      this.compressedSize += chunk.length;\n    }\n\n    return super.push(chunk, encoding);\n  }\n\n  _transform(chunk, encoding, callback) {\n    if (chunk) {\n      this.checksum = crc32.buf(chunk, this.checksum) >>> 0;\n      this.rawSize += chunk.length;\n    }\n\n    super._transform(chunk, encoding, callback);\n  }\n\n  digest(encoding) {\n    const checksum = Buffer.allocUnsafe(4);\n    checksum.writeUInt32BE(this.checksum >>> 0, 0);\n    return encoding ? checksum.toString(encoding) : checksum;\n  }\n\n  hex() {\n    return this.digest('hex').toUpperCase();\n  }\n\n  size(compressed = false) {\n    if (compressed) {\n      return this.compressedSize;\n    } else {\n      return this.rawSize;\n    }\n  }\n\n}\n\nmodule.exports = DeflateCRC32Stream;","map":{"version":3,"sources":["/home/dev/Documentos/Projects/github-clone/node_modules/crc32-stream/lib/deflate-crc32-stream.js"],"names":["DeflateRaw","require","crc32","DeflateCRC32Stream","constructor","options","checksum","Buffer","allocUnsafe","writeInt32BE","rawSize","compressedSize","push","chunk","encoding","length","_transform","callback","buf","digest","writeUInt32BE","toString","hex","toUpperCase","size","compressed","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEA,MAAM;AAACA,EAAAA;AAAD,IAAeC,OAAO,CAAC,MAAD,CAA5B;;AAEA,MAAMC,KAAK,GAAGD,OAAO,CAAC,QAAD,CAArB;;AAEA,MAAME,kBAAN,SAAiCH,UAAjC,CAA4C;AAC1CI,EAAAA,WAAW,CAACC,OAAD,EAAU;AACnB,UAAMA,OAAN;AAEA,SAAKC,QAAL,GAAgBC,MAAM,CAACC,WAAP,CAAmB,CAAnB,CAAhB;AACA,SAAKF,QAAL,CAAcG,YAAd,CAA2B,CAA3B,EAA8B,CAA9B;AAEA,SAAKC,OAAL,GAAe,CAAf;AACA,SAAKC,cAAL,GAAsB,CAAtB;AACD;;AAEDC,EAAAA,IAAI,CAACC,KAAD,EAAQC,QAAR,EAAkB;AACpB,QAAID,KAAJ,EAAW;AACT,WAAKF,cAAL,IAAuBE,KAAK,CAACE,MAA7B;AACD;;AAED,WAAO,MAAMH,IAAN,CAAWC,KAAX,EAAkBC,QAAlB,CAAP;AACD;;AAEDE,EAAAA,UAAU,CAACH,KAAD,EAAQC,QAAR,EAAkBG,QAAlB,EAA4B;AACpC,QAAIJ,KAAJ,EAAW;AACT,WAAKP,QAAL,GAAgBJ,KAAK,CAACgB,GAAN,CAAUL,KAAV,EAAiB,KAAKP,QAAtB,MAAoC,CAApD;AACA,WAAKI,OAAL,IAAgBG,KAAK,CAACE,MAAtB;AACD;;AAED,UAAMC,UAAN,CAAiBH,KAAjB,EAAwBC,QAAxB,EAAkCG,QAAlC;AACD;;AAEDE,EAAAA,MAAM,CAACL,QAAD,EAAW;AACf,UAAMR,QAAQ,GAAGC,MAAM,CAACC,WAAP,CAAmB,CAAnB,CAAjB;AACAF,IAAAA,QAAQ,CAACc,aAAT,CAAuB,KAAKd,QAAL,KAAkB,CAAzC,EAA4C,CAA5C;AACA,WAAOQ,QAAQ,GAAGR,QAAQ,CAACe,QAAT,CAAkBP,QAAlB,CAAH,GAAiCR,QAAhD;AACD;;AAEDgB,EAAAA,GAAG,GAAG;AACJ,WAAO,KAAKH,MAAL,CAAY,KAAZ,EAAmBI,WAAnB,EAAP;AACD;;AAEDC,EAAAA,IAAI,CAACC,UAAU,GAAG,KAAd,EAAqB;AACvB,QAAIA,UAAJ,EAAgB;AACd,aAAO,KAAKd,cAAZ;AACD,KAFD,MAEO;AACL,aAAO,KAAKD,OAAZ;AACD;AACF;;AA5CyC;;AA+C5CgB,MAAM,CAACC,OAAP,GAAiBxB,kBAAjB","sourcesContent":["/**\n * node-crc32-stream\n *\n * Copyright (c) 2014 Chris Talkington, contributors.\n * Licensed under the MIT license.\n * https://github.com/archiverjs/node-crc32-stream/blob/master/LICENSE-MIT\n */\n\n'use strict';\n\nconst {DeflateRaw} = require('zlib');\n\nconst crc32 = require('crc-32');\n\nclass DeflateCRC32Stream extends DeflateRaw {\n  constructor(options) {\n    super(options);\n\n    this.checksum = Buffer.allocUnsafe(4);\n    this.checksum.writeInt32BE(0, 0);\n\n    this.rawSize = 0;\n    this.compressedSize = 0;\n  }\n\n  push(chunk, encoding) {\n    if (chunk) {\n      this.compressedSize += chunk.length;\n    }\n\n    return super.push(chunk, encoding);\n  }\n\n  _transform(chunk, encoding, callback) {\n    if (chunk) {\n      this.checksum = crc32.buf(chunk, this.checksum) >>> 0;\n      this.rawSize += chunk.length;\n    }\n\n    super._transform(chunk, encoding, callback)\n  }\n\n  digest(encoding) {\n    const checksum = Buffer.allocUnsafe(4);\n    checksum.writeUInt32BE(this.checksum >>> 0, 0);\n    return encoding ? checksum.toString(encoding) : checksum;\n  }\n\n  hex() {\n    return this.digest('hex').toUpperCase();\n  }\n\n  size(compressed = false) {\n    if (compressed) {\n      return this.compressedSize;\n    } else {\n      return this.rawSize;\n    }\n  }\n}\n\nmodule.exports = DeflateCRC32Stream;\n"]},"metadata":{},"sourceType":"script"}