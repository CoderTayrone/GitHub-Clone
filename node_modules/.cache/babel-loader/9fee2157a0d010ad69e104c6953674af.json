{"ast":null,"code":"/**\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Use of this source code is governed by a BSD-style\n * license that can be found in the LICENSE file or at\n * https://github.com/firebase/superstatic/blob/master/LICENSE\n */\nconst setHeaders = require(\"./headers\");\n\nconst fs = require(\"fs\");\n\nmodule.exports = function (spec) {\n  let defaultErrorContent;\n\n  if (spec.errorPage) {\n    defaultErrorContent = fs.readFileSync(spec.errorPage, \"utf8\");\n  }\n\n  return function (req, res, next) {\n    const config = req.superstatic;\n    const errorPage = config.errorPage || \"/404.html\";\n    setHeaders(spec)({\n      superstatic: config,\n      url: errorPage\n    }, res, () => {\n      const handles = [{\n        file: errorPage,\n        status: 404\n      }];\n\n      if (defaultErrorContent) {\n        handles.push({\n          data: defaultErrorContent,\n          status: 404\n        });\n      }\n\n      res.superstatic.handle(handles, next);\n    });\n  };\n};","map":{"version":3,"sources":["/home/dev/Documentos/Projects/github-clone/node_modules/superstatic/lib/middleware/missing.js"],"names":["setHeaders","require","fs","module","exports","spec","defaultErrorContent","errorPage","readFileSync","req","res","next","config","superstatic","url","handles","file","status","push","data","handle"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AAEA,MAAMA,UAAU,GAAGC,OAAO,CAAC,WAAD,CAA1B;;AACA,MAAMC,EAAE,GAAGD,OAAO,CAAC,IAAD,CAAlB;;AAEAE,MAAM,CAACC,OAAP,GAAiB,UAASC,IAAT,EAAe;AAC9B,MAAIC,mBAAJ;;AACA,MAAID,IAAI,CAACE,SAAT,EAAoB;AAClBD,IAAAA,mBAAmB,GAAGJ,EAAE,CAACM,YAAH,CAAgBH,IAAI,CAACE,SAArB,EAAgC,MAAhC,CAAtB;AACD;;AAED,SAAO,UAASE,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AAC9B,UAAMC,MAAM,GAAGH,GAAG,CAACI,WAAnB;AACA,UAAMN,SAAS,GAAGK,MAAM,CAACL,SAAP,IAAoB,WAAtC;AAEAP,IAAAA,UAAU,CAACK,IAAD,CAAV,CACE;AACEQ,MAAAA,WAAW,EAAED,MADf;AAEEE,MAAAA,GAAG,EAAEP;AAFP,KADF,EAKEG,GALF,EAME,MAAM;AACJ,YAAMK,OAAO,GAAG,CAAC;AAAEC,QAAAA,IAAI,EAAET,SAAR;AAAmBU,QAAAA,MAAM,EAAE;AAA3B,OAAD,CAAhB;;AACA,UAAIX,mBAAJ,EAAyB;AACvBS,QAAAA,OAAO,CAACG,IAAR,CAAa;AAAEC,UAAAA,IAAI,EAAEb,mBAAR;AAA6BW,UAAAA,MAAM,EAAE;AAArC,SAAb;AACD;;AACDP,MAAAA,GAAG,CAACG,WAAJ,CAAgBO,MAAhB,CAAuBL,OAAvB,EAAgCJ,IAAhC;AACD,KAZH;AAcD,GAlBD;AAmBD,CAzBD","sourcesContent":["/**\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Use of this source code is governed by a BSD-style\n * license that can be found in the LICENSE file or at\n * https://github.com/firebase/superstatic/blob/master/LICENSE\n */\n\nconst setHeaders = require(\"./headers\");\nconst fs = require(\"fs\");\n\nmodule.exports = function(spec) {\n  let defaultErrorContent;\n  if (spec.errorPage) {\n    defaultErrorContent = fs.readFileSync(spec.errorPage, \"utf8\");\n  }\n\n  return function(req, res, next) {\n    const config = req.superstatic;\n    const errorPage = config.errorPage || \"/404.html\";\n\n    setHeaders(spec)(\n      {\n        superstatic: config,\n        url: errorPage\n      },\n      res,\n      () => {\n        const handles = [{ file: errorPage, status: 404 }];\n        if (defaultErrorContent) {\n          handles.push({ data: defaultErrorContent, status: 404 });\n        }\n        res.superstatic.handle(handles, next);\n      }\n    );\n  };\n};\n"]},"metadata":{},"sourceType":"script"}