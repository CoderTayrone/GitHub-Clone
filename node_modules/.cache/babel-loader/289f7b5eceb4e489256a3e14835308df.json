{"ast":null,"code":"module.exports = Traverse;\n\nfunction Traverse(obj) {\n  if (!(this instanceof Traverse)) return new Traverse(obj);\n  this.value = obj;\n}\n\nTraverse.prototype.get = function (ps) {\n  var node = this.value;\n\n  for (var i = 0; i < ps.length; i++) {\n    var key = ps[i];\n\n    if (!Object.hasOwnProperty.call(node, key)) {\n      node = undefined;\n      break;\n    }\n\n    node = node[key];\n  }\n\n  return node;\n};\n\nTraverse.prototype.set = function (ps, value) {\n  var node = this.value;\n\n  for (var i = 0; i < ps.length - 1; i++) {\n    var key = ps[i];\n    if (!Object.hasOwnProperty.call(node, key)) node[key] = {};\n    node = node[key];\n  }\n\n  node[ps[i]] = value;\n  return value;\n};\n\nTraverse.prototype.map = function (cb) {\n  return walk(this.value, cb, true);\n};\n\nTraverse.prototype.forEach = function (cb) {\n  this.value = walk(this.value, cb, false);\n  return this.value;\n};\n\nTraverse.prototype.reduce = function (cb, init) {\n  var skip = arguments.length === 1;\n  var acc = skip ? this.value : init;\n  this.forEach(function (x) {\n    if (!this.isRoot || !skip) {\n      acc = cb.call(this, acc, x);\n    }\n  });\n  return acc;\n};\n\nTraverse.prototype.deepEqual = function (obj) {\n  if (arguments.length !== 1) {\n    throw new Error('deepEqual requires exactly one object to compare against');\n  }\n\n  var equal = true;\n  var node = obj;\n  this.forEach(function (y) {\n    var notEqual = function () {\n      equal = false; //this.stop();\n\n      return undefined;\n    }.bind(this); //if (node === undefined || node === null) return notEqual();\n\n\n    if (!this.isRoot) {\n      /*\n          if (!Object.hasOwnProperty.call(node, this.key)) {\n              return notEqual();\n          }\n      */\n      if (typeof node !== 'object') return notEqual();\n      node = node[this.key];\n    }\n\n    var x = node;\n    this.post(function () {\n      node = x;\n    });\n\n    var toS = function (o) {\n      return Object.prototype.toString.call(o);\n    };\n\n    if (this.circular) {\n      if (Traverse(obj).get(this.circular.path) !== x) notEqual();\n    } else if (typeof x !== typeof y) {\n      notEqual();\n    } else if (x === null || y === null || x === undefined || y === undefined) {\n      if (x !== y) notEqual();\n    } else if (x.__proto__ !== y.__proto__) {\n      notEqual();\n    } else if (x === y) {// nop\n    } else if (typeof x === 'function') {\n      if (x instanceof RegExp) {\n        // both regexps on account of the __proto__ check\n        if (x.toString() != y.toString()) notEqual();\n      } else if (x !== y) notEqual();\n    } else if (typeof x === 'object') {\n      if (toS(y) === '[object Arguments]' || toS(x) === '[object Arguments]') {\n        if (toS(x) !== toS(y)) {\n          notEqual();\n        }\n      } else if (x instanceof Date || y instanceof Date) {\n        if (!(x instanceof Date) || !(y instanceof Date) || x.getTime() !== y.getTime()) {\n          notEqual();\n        }\n      } else {\n        var kx = Object.keys(x);\n        var ky = Object.keys(y);\n        if (kx.length !== ky.length) return notEqual();\n\n        for (var i = 0; i < kx.length; i++) {\n          var k = kx[i];\n\n          if (!Object.hasOwnProperty.call(y, k)) {\n            notEqual();\n          }\n        }\n      }\n    }\n  });\n  return equal;\n};\n\nTraverse.prototype.paths = function () {\n  var acc = [];\n  this.forEach(function (x) {\n    acc.push(this.path);\n  });\n  return acc;\n};\n\nTraverse.prototype.nodes = function () {\n  var acc = [];\n  this.forEach(function (x) {\n    acc.push(this.node);\n  });\n  return acc;\n};\n\nTraverse.prototype.clone = function () {\n  var parents = [],\n      nodes = [];\n  return function clone(src) {\n    for (var i = 0; i < parents.length; i++) {\n      if (parents[i] === src) {\n        return nodes[i];\n      }\n    }\n\n    if (typeof src === 'object' && src !== null) {\n      var dst = copy(src);\n      parents.push(src);\n      nodes.push(dst);\n      Object.keys(src).forEach(function (key) {\n        dst[key] = clone(src[key]);\n      });\n      parents.pop();\n      nodes.pop();\n      return dst;\n    } else {\n      return src;\n    }\n  }(this.value);\n};\n\nfunction walk(root, cb, immutable) {\n  var path = [];\n  var parents = [];\n  var alive = true;\n  return function walker(node_) {\n    var node = immutable ? copy(node_) : node_;\n    var modifiers = {};\n    var state = {\n      node: node,\n      node_: node_,\n      path: [].concat(path),\n      parent: parents.slice(-1)[0],\n      key: path.slice(-1)[0],\n      isRoot: path.length === 0,\n      level: path.length,\n      circular: null,\n      update: function (x) {\n        if (!state.isRoot) {\n          state.parent.node[state.key] = x;\n        }\n\n        state.node = x;\n      },\n      'delete': function () {\n        delete state.parent.node[state.key];\n      },\n      remove: function () {\n        if (Array.isArray(state.parent.node)) {\n          state.parent.node.splice(state.key, 1);\n        } else {\n          delete state.parent.node[state.key];\n        }\n      },\n      before: function (f) {\n        modifiers.before = f;\n      },\n      after: function (f) {\n        modifiers.after = f;\n      },\n      pre: function (f) {\n        modifiers.pre = f;\n      },\n      post: function (f) {\n        modifiers.post = f;\n      },\n      stop: function () {\n        alive = false;\n      }\n    };\n    if (!alive) return state;\n\n    if (typeof node === 'object' && node !== null) {\n      state.isLeaf = Object.keys(node).length == 0;\n\n      for (var i = 0; i < parents.length; i++) {\n        if (parents[i].node_ === node_) {\n          state.circular = parents[i];\n          break;\n        }\n      }\n    } else {\n      state.isLeaf = true;\n    }\n\n    state.notLeaf = !state.isLeaf;\n    state.notRoot = !state.isRoot; // use return values to update if defined\n\n    var ret = cb.call(state, state.node);\n    if (ret !== undefined && state.update) state.update(ret);\n    if (modifiers.before) modifiers.before.call(state, state.node);\n\n    if (typeof state.node == 'object' && state.node !== null && !state.circular) {\n      parents.push(state);\n      var keys = Object.keys(state.node);\n      keys.forEach(function (key, i) {\n        path.push(key);\n        if (modifiers.pre) modifiers.pre.call(state, state.node[key], key);\n        var child = walker(state.node[key]);\n\n        if (immutable && Object.hasOwnProperty.call(state.node, key)) {\n          state.node[key] = child.node;\n        }\n\n        child.isLast = i == keys.length - 1;\n        child.isFirst = i == 0;\n        if (modifiers.post) modifiers.post.call(state, child);\n        path.pop();\n      });\n      parents.pop();\n    }\n\n    if (modifiers.after) modifiers.after.call(state, state.node);\n    return state;\n  }(root).node;\n}\n\nObject.keys(Traverse.prototype).forEach(function (key) {\n  Traverse[key] = function (obj) {\n    var args = [].slice.call(arguments, 1);\n    var t = Traverse(obj);\n    return t[key].apply(t, args);\n  };\n});\n\nfunction copy(src) {\n  if (typeof src === 'object' && src !== null) {\n    var dst;\n\n    if (Array.isArray(src)) {\n      dst = [];\n    } else if (src instanceof Date) {\n      dst = new Date(src);\n    } else if (src instanceof Boolean) {\n      dst = new Boolean(src);\n    } else if (src instanceof Number) {\n      dst = new Number(src);\n    } else if (src instanceof String) {\n      dst = new String(src);\n    } else {\n      dst = Object.create(Object.getPrototypeOf(src));\n    }\n\n    Object.keys(src).forEach(function (key) {\n      dst[key] = src[key];\n    });\n    return dst;\n  } else return src;\n}","map":{"version":3,"sources":["/home/dev/Documentos/Projects/github-clone/node_modules/traverse/index.js"],"names":["module","exports","Traverse","obj","value","prototype","get","ps","node","i","length","key","Object","hasOwnProperty","call","undefined","set","map","cb","walk","forEach","reduce","init","skip","arguments","acc","x","isRoot","deepEqual","Error","equal","y","notEqual","bind","post","toS","o","toString","circular","path","__proto__","RegExp","Date","getTime","kx","keys","ky","k","paths","push","nodes","clone","parents","src","dst","copy","pop","root","immutable","alive","walker","node_","modifiers","state","concat","parent","slice","level","update","remove","Array","isArray","splice","before","f","after","pre","stop","isLeaf","notLeaf","notRoot","ret","child","isLast","isFirst","args","t","apply","Boolean","Number","String","create","getPrototypeOf"],"mappings":"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","sourcesContent":["module.exports = Traverse;\nfunction Traverse (obj) {\n    if (!(this instanceof Traverse)) return new Traverse(obj);\n    this.value = obj;\n}\n\nTraverse.prototype.get = function (ps) {\n    var node = this.value;\n    for (var i = 0; i < ps.length; i ++) {\n        var key = ps[i];\n        if (!Object.hasOwnProperty.call(node, key)) {\n            node = undefined;\n            break;\n        }\n        node = node[key];\n    }\n    return node;\n};\n\nTraverse.prototype.set = function (ps, value) {\n    var node = this.value;\n    for (var i = 0; i < ps.length - 1; i ++) {\n        var key = ps[i];\n        if (!Object.hasOwnProperty.call(node, key)) node[key] = {};\n        node = node[key];\n    }\n    node[ps[i]] = value;\n    return value;\n};\n\nTraverse.prototype.map = function (cb) {\n    return walk(this.value, cb, true);\n};\n\nTraverse.prototype.forEach = function (cb) {\n    this.value = walk(this.value, cb, false);\n    return this.value;\n};\n\nTraverse.prototype.reduce = function (cb, init) {\n    var skip = arguments.length === 1;\n    var acc = skip ? this.value : init;\n    this.forEach(function (x) {\n        if (!this.isRoot || !skip) {\n            acc = cb.call(this, acc, x);\n        }\n    });\n    return acc;\n};\n\nTraverse.prototype.deepEqual = function (obj) {\n    if (arguments.length !== 1) {\n        throw new Error(\n            'deepEqual requires exactly one object to compare against'\n        );\n    }\n    \n    var equal = true;\n    var node = obj;\n    \n    this.forEach(function (y) {\n        var notEqual = (function () {\n            equal = false;\n            //this.stop();\n            return undefined;\n        }).bind(this);\n        \n        //if (node === undefined || node === null) return notEqual();\n        \n        if (!this.isRoot) {\n        /*\n            if (!Object.hasOwnProperty.call(node, this.key)) {\n                return notEqual();\n            }\n        */\n            if (typeof node !== 'object') return notEqual();\n            node = node[this.key];\n        }\n        \n        var x = node;\n        \n        this.post(function () {\n            node = x;\n        });\n        \n        var toS = function (o) {\n            return Object.prototype.toString.call(o);\n        };\n        \n        if (this.circular) {\n            if (Traverse(obj).get(this.circular.path) !== x) notEqual();\n        }\n        else if (typeof x !== typeof y) {\n            notEqual();\n        }\n        else if (x === null || y === null || x === undefined || y === undefined) {\n            if (x !== y) notEqual();\n        }\n        else if (x.__proto__ !== y.__proto__) {\n            notEqual();\n        }\n        else if (x === y) {\n            // nop\n        }\n        else if (typeof x === 'function') {\n            if (x instanceof RegExp) {\n                // both regexps on account of the __proto__ check\n                if (x.toString() != y.toString()) notEqual();\n            }\n            else if (x !== y) notEqual();\n        }\n        else if (typeof x === 'object') {\n            if (toS(y) === '[object Arguments]'\n            || toS(x) === '[object Arguments]') {\n                if (toS(x) !== toS(y)) {\n                    notEqual();\n                }\n            }\n            else if (x instanceof Date || y instanceof Date) {\n                if (!(x instanceof Date) || !(y instanceof Date)\n                || x.getTime() !== y.getTime()) {\n                    notEqual();\n                }\n            }\n            else {\n                var kx = Object.keys(x);\n                var ky = Object.keys(y);\n                if (kx.length !== ky.length) return notEqual();\n                for (var i = 0; i < kx.length; i++) {\n                    var k = kx[i];\n                    if (!Object.hasOwnProperty.call(y, k)) {\n                        notEqual();\n                    }\n                }\n            }\n        }\n    });\n    \n    return equal;\n};\n\nTraverse.prototype.paths = function () {\n    var acc = [];\n    this.forEach(function (x) {\n        acc.push(this.path); \n    });\n    return acc;\n};\n\nTraverse.prototype.nodes = function () {\n    var acc = [];\n    this.forEach(function (x) {\n        acc.push(this.node);\n    });\n    return acc;\n};\n\nTraverse.prototype.clone = function () {\n    var parents = [], nodes = [];\n    \n    return (function clone (src) {\n        for (var i = 0; i < parents.length; i++) {\n            if (parents[i] === src) {\n                return nodes[i];\n            }\n        }\n        \n        if (typeof src === 'object' && src !== null) {\n            var dst = copy(src);\n            \n            parents.push(src);\n            nodes.push(dst);\n            \n            Object.keys(src).forEach(function (key) {\n                dst[key] = clone(src[key]);\n            });\n            \n            parents.pop();\n            nodes.pop();\n            return dst;\n        }\n        else {\n            return src;\n        }\n    })(this.value);\n};\n\nfunction walk (root, cb, immutable) {\n    var path = [];\n    var parents = [];\n    var alive = true;\n    \n    return (function walker (node_) {\n        var node = immutable ? copy(node_) : node_;\n        var modifiers = {};\n        \n        var state = {\n            node : node,\n            node_ : node_,\n            path : [].concat(path),\n            parent : parents.slice(-1)[0],\n            key : path.slice(-1)[0],\n            isRoot : path.length === 0,\n            level : path.length,\n            circular : null,\n            update : function (x) {\n                if (!state.isRoot) {\n                    state.parent.node[state.key] = x;\n                }\n                state.node = x;\n            },\n            'delete' : function () {\n                delete state.parent.node[state.key];\n            },\n            remove : function () {\n                if (Array.isArray(state.parent.node)) {\n                    state.parent.node.splice(state.key, 1);\n                }\n                else {\n                    delete state.parent.node[state.key];\n                }\n            },\n            before : function (f) { modifiers.before = f },\n            after : function (f) { modifiers.after = f },\n            pre : function (f) { modifiers.pre = f },\n            post : function (f) { modifiers.post = f },\n            stop : function () { alive = false }\n        };\n        \n        if (!alive) return state;\n        \n        if (typeof node === 'object' && node !== null) {\n            state.isLeaf = Object.keys(node).length == 0;\n            \n            for (var i = 0; i < parents.length; i++) {\n                if (parents[i].node_ === node_) {\n                    state.circular = parents[i];\n                    break;\n                }\n            }\n        }\n        else {\n            state.isLeaf = true;\n        }\n        \n        state.notLeaf = !state.isLeaf;\n        state.notRoot = !state.isRoot;\n        \n        // use return values to update if defined\n        var ret = cb.call(state, state.node);\n        if (ret !== undefined && state.update) state.update(ret);\n        if (modifiers.before) modifiers.before.call(state, state.node);\n        \n        if (typeof state.node == 'object'\n        && state.node !== null && !state.circular) {\n            parents.push(state);\n            \n            var keys = Object.keys(state.node);\n            keys.forEach(function (key, i) {\n                path.push(key);\n                \n                if (modifiers.pre) modifiers.pre.call(state, state.node[key], key);\n                \n                var child = walker(state.node[key]);\n                if (immutable && Object.hasOwnProperty.call(state.node, key)) {\n                    state.node[key] = child.node;\n                }\n                \n                child.isLast = i == keys.length - 1;\n                child.isFirst = i == 0;\n                \n                if (modifiers.post) modifiers.post.call(state, child);\n                \n                path.pop();\n            });\n            parents.pop();\n        }\n        \n        if (modifiers.after) modifiers.after.call(state, state.node);\n        \n        return state;\n    })(root).node;\n}\n\nObject.keys(Traverse.prototype).forEach(function (key) {\n    Traverse[key] = function (obj) {\n        var args = [].slice.call(arguments, 1);\n        var t = Traverse(obj);\n        return t[key].apply(t, args);\n    };\n});\n\nfunction copy (src) {\n    if (typeof src === 'object' && src !== null) {\n        var dst;\n        \n        if (Array.isArray(src)) {\n            dst = [];\n        }\n        else if (src instanceof Date) {\n            dst = new Date(src);\n        }\n        else if (src instanceof Boolean) {\n            dst = new Boolean(src);\n        }\n        else if (src instanceof Number) {\n            dst = new Number(src);\n        }\n        else if (src instanceof String) {\n            dst = new String(src);\n        }\n        else {\n            dst = Object.create(Object.getPrototypeOf(src));\n        }\n        \n        Object.keys(src).forEach(function (key) {\n            dst[key] = src[key];\n        });\n        return dst;\n    }\n    else return src;\n}\n"]},"metadata":{},"sourceType":"script"}