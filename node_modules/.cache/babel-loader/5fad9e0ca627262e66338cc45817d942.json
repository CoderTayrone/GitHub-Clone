{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.deleteDocuments = exports.deleteDocument = exports.listCollectionIds = void 0;\n\nconst api_1 = require(\"../api\");\n\nconst apiv2 = require(\"../apiv2\");\n\nconst _CLIENT = new apiv2.Client({\n  auth: true,\n  apiVersion: \"v1\",\n  urlPrefix: api_1.firestoreOriginOrEmulator\n});\n\nfunction listCollectionIds(project) {\n  const url = \"projects/\" + project + \"/databases/(default)/documents:listCollectionIds\";\n  const data = {\n    pageSize: 2147483647\n  };\n  return _CLIENT.post(url, data).then(res => {\n    return res.body.collectionIds || [];\n  });\n}\n\nexports.listCollectionIds = listCollectionIds;\n\nasync function deleteDocument(doc) {\n  return _CLIENT.delete(doc.name);\n}\n\nexports.deleteDocument = deleteDocument;\n\nasync function deleteDocuments(project, docs) {\n  const url = \"projects/\" + project + \"/databases/(default)/documents:commit\";\n  const writes = docs.map(doc => {\n    return {\n      delete: doc.name\n    };\n  });\n  const data = {\n    writes\n  };\n  const res = await _CLIENT.post(url, data);\n  return res.body.writeResults.length;\n}\n\nexports.deleteDocuments = deleteDocuments;","map":{"version":3,"sources":["/home/dev/Documentos/Projects/github-clone/node_modules/firebase-tools/lib/gcp/firestore.js"],"names":["Object","defineProperty","exports","value","deleteDocuments","deleteDocument","listCollectionIds","api_1","require","apiv2","_CLIENT","Client","auth","apiVersion","urlPrefix","firestoreOriginOrEmulator","project","url","data","pageSize","post","then","res","body","collectionIds","doc","delete","name","docs","writes","map","writeResults","length"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,eAAR,GAA0BF,OAAO,CAACG,cAAR,GAAyBH,OAAO,CAACI,iBAAR,GAA4B,KAAK,CAApF;;AACA,MAAMC,KAAK,GAAGC,OAAO,CAAC,QAAD,CAArB;;AACA,MAAMC,KAAK,GAAGD,OAAO,CAAC,UAAD,CAArB;;AACA,MAAME,OAAO,GAAG,IAAID,KAAK,CAACE,MAAV,CAAiB;AAC7BC,EAAAA,IAAI,EAAE,IADuB;AAE7BC,EAAAA,UAAU,EAAE,IAFiB;AAG7BC,EAAAA,SAAS,EAAEP,KAAK,CAACQ;AAHY,CAAjB,CAAhB;;AAKA,SAAST,iBAAT,CAA2BU,OAA3B,EAAoC;AAChC,QAAMC,GAAG,GAAG,cAAcD,OAAd,GAAwB,kDAApC;AACA,QAAME,IAAI,GAAG;AACTC,IAAAA,QAAQ,EAAE;AADD,GAAb;AAGA,SAAOT,OAAO,CAACU,IAAR,CAAaH,GAAb,EAAkBC,IAAlB,EAAwBG,IAAxB,CAA8BC,GAAD,IAAS;AACzC,WAAOA,GAAG,CAACC,IAAJ,CAASC,aAAT,IAA0B,EAAjC;AACH,GAFM,CAAP;AAGH;;AACDtB,OAAO,CAACI,iBAAR,GAA4BA,iBAA5B;;AACA,eAAeD,cAAf,CAA8BoB,GAA9B,EAAmC;AAC/B,SAAOf,OAAO,CAACgB,MAAR,CAAeD,GAAG,CAACE,IAAnB,CAAP;AACH;;AACDzB,OAAO,CAACG,cAAR,GAAyBA,cAAzB;;AACA,eAAeD,eAAf,CAA+BY,OAA/B,EAAwCY,IAAxC,EAA8C;AAC1C,QAAMX,GAAG,GAAG,cAAcD,OAAd,GAAwB,uCAApC;AACA,QAAMa,MAAM,GAAGD,IAAI,CAACE,GAAL,CAAUL,GAAD,IAAS;AAC7B,WAAO;AAAEC,MAAAA,MAAM,EAAED,GAAG,CAACE;AAAd,KAAP;AACH,GAFc,CAAf;AAGA,QAAMT,IAAI,GAAG;AAAEW,IAAAA;AAAF,GAAb;AACA,QAAMP,GAAG,GAAG,MAAMZ,OAAO,CAACU,IAAR,CAAaH,GAAb,EAAkBC,IAAlB,CAAlB;AACA,SAAOI,GAAG,CAACC,IAAJ,CAASQ,YAAT,CAAsBC,MAA7B;AACH;;AACD9B,OAAO,CAACE,eAAR,GAA0BA,eAA1B","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.deleteDocuments = exports.deleteDocument = exports.listCollectionIds = void 0;\nconst api_1 = require(\"../api\");\nconst apiv2 = require(\"../apiv2\");\nconst _CLIENT = new apiv2.Client({\n    auth: true,\n    apiVersion: \"v1\",\n    urlPrefix: api_1.firestoreOriginOrEmulator,\n});\nfunction listCollectionIds(project) {\n    const url = \"projects/\" + project + \"/databases/(default)/documents:listCollectionIds\";\n    const data = {\n        pageSize: 2147483647,\n    };\n    return _CLIENT.post(url, data).then((res) => {\n        return res.body.collectionIds || [];\n    });\n}\nexports.listCollectionIds = listCollectionIds;\nasync function deleteDocument(doc) {\n    return _CLIENT.delete(doc.name);\n}\nexports.deleteDocument = deleteDocument;\nasync function deleteDocuments(project, docs) {\n    const url = \"projects/\" + project + \"/databases/(default)/documents:commit\";\n    const writes = docs.map((doc) => {\n        return { delete: doc.name };\n    });\n    const data = { writes };\n    const res = await _CLIENT.post(url, data);\n    return res.body.writeResults.length;\n}\nexports.deleteDocuments = deleteDocuments;\n"]},"metadata":{},"sourceType":"script"}